!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=40)}([function(e,t){e.exports=window.wp.element},function(e,t,r){e.exports=r(38)()},function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=window.wc.date},function(e,t){e.exports=window.lodash},function(e,t){e.exports=window.wc.components},function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=window.wc.data},function(e,t){e.exports=window.wc.tracks},function(e,t){e.exports=window.wp.hooks},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(36);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(37).default,a=r(17);e.exports=function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=window.wp.apiFetch},function(e,t){e.exports=window.wp.data},function(e,t){e.exports=window.wc.navigation},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=window.wc.number},function(e,t){e.exports=window.wp.htmlEntities},function(e,t){e.exports=window.wp.compose},function(e,t){e.exports=window.wc.wcSettings},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){"use strict";t.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},a=t||{},i=e.split(o),c=a.decode||n,l=0;l<i.length;l++){var u=i[l],p=u.indexOf("=");if(!(p<0)){var d=u.substr(0,p).trim(),f=u.substr(++p,u.length).trim();'"'==f[0]&&(f=f.slice(1,-1)),null==r[d]&&(r[d]=s(f,c))}}return r},t.serialize=function(e,t,r){var n=r||{},o=n.encode||a;if("function"!=typeof o)throw new TypeError("option encode is invalid");if(!i.test(e))throw new TypeError("argument name is invalid");var s=o(t);if(s&&!i.test(s))throw new TypeError("argument val is invalid");var c=e+"="+s;if(null!=n.maxAge){var l=n.maxAge-0;if(isNaN(l))throw new Error("maxAge should be a Number");c+="; Max-Age="+Math.floor(l)}if(n.domain){if(!i.test(n.domain))throw new TypeError("option domain is invalid");c+="; Domain="+n.domain}if(n.path){if(!i.test(n.path))throw new TypeError("option path is invalid");c+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");c+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(c+="; HttpOnly"),n.secure&&(c+="; Secure"),n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return c};var n=decodeURIComponent,a=encodeURIComponent,o=/; */,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function s(e,t){try{return t(e)}catch(t){return e}}},function(e,t){e.exports=window.wc.currency},function(e,t){e.exports=window.wp.date},function(e,t){e.exports=window.wc.csvExport},function(e,t){e.exports=window.wp.components},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(31),a=r(32),o=r(33),i=r(34);e.exports=function(e){return n(e)||a(e)||o(e)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=window.wp.url},function(e,t,r){var n=r(28);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(28);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){},function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t,n)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){"use strict";var n=r(39);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,o,i){if(i!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return r.PropTypes=r,r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,r){"use strict";r.r(t);var n=r(29),a=r.n(n),o=(r(35),r(9)),i=r(2),s=r(22),c=r.n(s),l=r(10),u=r.n(l),p=r(11),d=r.n(p),f=r(17),m=r.n(f),y=r(12),h=r.n(y),v=r(13),b=r.n(v),g=r(6),_=r.n(g),O=r(0),w=r(5),j=r(20),S=r(1),x=r.n(S),k=r(4),D=r(15),C=r(7),E=r(3),R=r(8),P=r(24),T=r.n(P),q=r(21),A=Object(q.getSetting)("currency"),F=T()(A),L=Object(O.createContext)(F);function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var N=function(e){h()(a,e);var t,r,n=(t=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=_()(t);if(r){var a=_()(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return b()(this,e)});function a(){var e;return u()(this,a),(e=n.call(this)).onDateSelect=e.onDateSelect.bind(m()(e)),e.onFilterSelect=e.onFilterSelect.bind(m()(e)),e.onAdvancedFilterAction=e.onAdvancedFilterAction.bind(m()(e)),e}return d()(a,[{key:"onDateSelect",value:function(e){var t=this.props,r=t.report;(0,t.addCesSurveyForAnalytics)(),Object(R.recordEvent)("datepicker_update",I({report:r},Object(k.omitBy)(e,k.isUndefined)))}},{key:"onFilterSelect",value:function(e){var t=this.props,r=t.report,n=t.addCesSurveyForAnalytics,a=e.filter||e["filter-variations"];["single_product","single_category","single_coupon","single_variation"].includes(a)&&n();var o={report:r,filter:e.filter||"all"};"single_product"===e.filter&&(o.filter_variation=e["filter-variations"]||"all"),Object(R.recordEvent)("analytics_filter",o)}},{key:"onAdvancedFilterAction",value:function(e,t){var r=this.props,n=r.report,a=r.addCesSurveyForAnalytics;switch(e){case"add":Object(R.recordEvent)("analytics_filters_add",{report:n,filter:t.key});break;case"remove":Object(R.recordEvent)("analytics_filters_remove",{report:n,filter:t.key});break;case"filter":var o=Object.keys(t).reduce((function(e,r){return e[Object(k.snakeCase)(r)]=t[r],e}),{});a(),Object(R.recordEvent)("analytics_filters_filter",I({report:n},o));break;case"clear_all":Object(R.recordEvent)("analytics_filters_clear_all",{report:n});break;case"match":Object(R.recordEvent)("analytics_filters_all_any",{report:n,value:t.match})}}},{key:"render",value:function(){var e=this.props,t=e.advancedFilters,r=e.filters,n=e.path,a=e.query,o=e.showDatePicker,i=e.defaultDateRange,s=Object(E.getDateParamsFromQuery)(a,i),c=s.period,l=s.compare,u=s.before,p=s.after,d=Object(E.getCurrentDates)(a,i),f={period:c,compare:l,before:u,after:p,primaryDate:d.primary,secondaryDate:d.secondary},m=this.context;return Object(O.createElement)(w.ReportFilters,{query:a,siteLocale:Object(q.getSetting)("locale").siteLocale,currency:m.getCurrencyConfig(),path:n,filters:r,advancedFilters:t,showDatePicker:o,onDateSelect:this.onDateSelect,onFilterSelect:this.onFilterSelect,onAdvancedFilterAction:this.onAdvancedFilterAction,dateQuery:f,isoDateFormat:E.isoDateFormat,param:"providers"})}}]),a}(O.Component);N.contextType=L;var U=Object(j.compose)(Object(D.withSelect)((function(e){return{defaultDateRange:e(C.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings").woocommerce_default_date_range}})),Object(D.withDispatch)((function(e){return{addCesSurveyForAnalytics:e("wc/customer-effort-score").addCesSurveyForAnalytics}})))(N);N.propTypes={advancedFilters:x.a.object,filters:x.a.array,path:x.a.string.isRequired,query:x.a.object,showDatePicker:x.a.bool,report:x.a.string.isRequired};var Q=r(14),V=r.n(Q),B=r(27),H=function(){return Object(O.createElement)("svg",{role:"img","aria-hidden":"true",focusable:"false",version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 24 24",height:"24px",width:"24px",style:{marginRight:"8px"}},Object(O.createElement)("path",{d:"M18,9c-0.009,0-0.017,0.002-0.025,0.003C17.72,5.646,14.922,3,11.5,3C7.91,3,5,5.91,5,9.5c0,0.524,0.069,1.031,0.186,1.519\r C5.123,11.016,5.064,11,5,11c-2.209,0-4,1.791-4,4c0,1.202,0.541,2.267,1.38,3h18.593C22.196,17.089,23,15.643,23,14\r C23,11.239,20.761,9,18,9z M12,16l-4-5h3V8h2v3h3L12,16z"}))},Y=r(26);var K=function(e){h()(a,e);var t,r,n=(t=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=_()(t);if(r){var a=_()(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return b()(this,e)});function a(e){var t;return u()(this,a),(t=n.call(this,e)).state={isLoading:t.props.isLoading,statusdata:[],providerdata:[],statusdata2:[],providerdata2:[],loading:!1},t}return d()(a,[{key:"componentDidUpdate",value:function(e){e!==this.props&&this.fetchData()}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"getQueryParameters",value:function(e){var t=encodeURIComponent(Object(E.appendTimestamp)(e.primaryDate.after,"start")),r=encodeURIComponent(Object(E.appendTimestamp)(e.primaryDate.before,"end"));return"?after=".concat(t,"&before=").concat(r)}},{key:"fetchData",value:function(){var e=this;this.setState({loading:!0});var t=window.location.href,r=new URL(t),n=r.searchParams.get("providers"),a=r.searchParams.get("shipment_status"),o="/wc-analytics/reports/data/shipments_by_provider"+this.getQueryParameters(this.props.dateQuery)+"&providers="+(null==n?"":n)+"&shipment_status="+(null==a?"":a);V()({path:o}).then((function(t){e.status_by_providers(t.shipment_status),e.shipment_by_providers(t.shipping_provider),e.setState({statusdata2:t.shipment_status,providerdata2:t.shipping_provider,loading:!1})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"status_by_providers",value:function(e){if(e&&e.length>0){for(var t=[],r=[],n=0;n<e.length;n++){for(var a in t=[],e[n])"shipment_status"==a?t.push({display:Object(O.createElement)(w.Link,{href:e[n].href,type:"wp-admin"},e[n][a]),value:a}):"href"==a||t.push({display:e[n][a],value:a});r.push(t)}this.setState({statusdata:r})}else this.setState({statusdata:[]})}},{key:"shipment_by_providers",value:function(e){if(e&&e.length>0){for(var t=[],r=[],n=0;n<e.length;n++){for(var a in t=[],e[n])"shipping_provider"==a?t.push({display:Object(O.createElement)(w.Link,{href:e[n].href,type:"wp-admin"},e[n][a]),value:a}):"href"==a||t.push({display:e[n][a],value:a});r.push(t)}this.setState({providerdata:r})}else this.setState({providerdata:[]})}},{key:"onClickDownload",value:function(e,t){var r=[],n="shipment-status"==t?this.state.statusdata2?this.state.statusdata2:[]:this.state.providerdata2?this.state.providerdata2:[];n.length>0&&n.map((function(e){r.push("shipment-status"==t?[{display:null==e?void 0:e.shipment_status,value:null==e?void 0:e.shipment_status},{display:null==e?void 0:e.total,value:null==e?void 0:e.total},{display:(null==e?void 0:e.percentage)+"%",value:(null==e?void 0:e.percentage)+"%"}]:[{display:null==e?void 0:e.shipping_provider,value:null==e?void 0:e.shipping_provider},{display:null==e?void 0:e.total,value:null==e?void 0:e.total},{display:(null==e?void 0:e.percentage)+"%",value:(null==e?void 0:e.percentage)+"%"},{display:null==e?void 0:e.average,value:null==e?void 0:e.average}])})),r.length>0&&Object(Y.downloadCSVFile)(Object(Y.generateCSVFileName)(t),Object(Y.generateCSVDataFromTable)(e,r))}},{key:"render",value:function(){var e=this;return Object(O.createElement)("div",{className:"woocommerce-dashboard__columns"},Object(O.createElement)(w.TableCard,{title:"Shipments by Status",headers:[{label:"Tracking Status",key:"shipment_status",isLeftAligned:!0,required:!0},{label:"Shipments",key:"total",isLeftAligned:!0},{label:"% of total",key:"percentage",isLeftAligned:!0}],actions:[Object(O.createElement)(B.Button,{key:"download",className:"woocommerce-table__download-button",disabled:this.state.loading,onClick:function(){return e.onClickDownload([{label:"Tracking Status",key:"shipment_status",isLeftAligned:!0,required:!0},{label:"Shipments",key:"total",isLeftAligned:!0},{label:"% of total",key:"percentage",isLeftAligned:!0}],"shipment-status")}},Object(O.createElement)(H,null),Object(O.createElement)("span",{className:"woocommerce-table__download-button__label"},"Download"))],rows:this.state.statusdata,rowsPerPage:this.state.loading?5:1e3,isLoading:this.state.loading,totalRows:this.state.statusdata.length}),Object(O.createElement)(w.TableCard,{title:"Shipments by Provider",headers:[{label:"Shipping Provider",key:"shipping_provider",isLeftAligned:!0,required:!0},{label:"Shipments",key:"shipments",isLeftAligned:!0},{label:"% of total",key:"total",isLeftAligned:!0},{label:"Avg Shipping Time",key:"average",isLeftAligned:!0}],actions:[Object(O.createElement)(B.Button,{key:"download",className:"woocommerce-table__download-button",disabled:this.state.loading,onClick:function(){return e.onClickDownload([{label:"Shipping Provider",key:"shipping_provider",isLeftAligned:!0,required:!0},{label:"Shipments",key:"shipments",isLeftAligned:!0},{label:"% of total",key:"total",isLeftAligned:!0},{label:"Avg Shipping Time",key:"average",isLeftAligned:!0}],"shipment-provider")}},Object(O.createElement)(H,null),Object(O.createElement)("span",{className:"woocommerce-table__download-button__label"},"Download"))],rows:this.state.providerdata,rowsPerPage:this.state.loading?5:1e3,isLoading:this.state.loading,totalRows:this.state.providerdata.length,className:"ts-card-footer"}))}}]),a}(O.Component),z=r(16),G=r(18),J=r(23);function W(e,t){void 0===t&&(t={});var r=function(e){return e&&"j"===e[0]&&":"===e[1]?e.substr(2):e}(e);if(function(e,t){return void 0===t&&(t=!e||"{"!==e[0]&&"["!==e[0]&&'"'!==e[0]),!t}(r,t.doNotParse))try{return JSON.parse(r)}catch(e){}return e}var $=function(){return($=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},X=function(){function e(e,t){var r=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(e,t){return"string"==typeof e?J.parse(e,t):"object"==typeof e&&null!==e?e:{}}(e,t),new Promise((function(){r.HAS_DOCUMENT_COOKIE="object"==typeof document&&"string"==typeof document.cookie})).catch((function(){}))}return e.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=J.parse(document.cookie,e))},e.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},e.prototype.get=function(e,t,r){return void 0===t&&(t={}),this._updateBrowserValues(r),W(this.cookies[e],t)},e.prototype.getAll=function(e,t){void 0===e&&(e={}),this._updateBrowserValues(t);var r={};for(var n in this.cookies)r[n]=W(this.cookies[n],e);return r},e.prototype.set=function(e,t,r){var n;"object"==typeof t&&(t=JSON.stringify(t)),this.cookies=$($({},this.cookies),((n={})[e]=t,n)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=J.serialize(e,t,r)),this._emitChange({name:e,value:t,options:r})},e.prototype.remove=function(e,t){var r=t=$($({},t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=$({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=J.serialize(e,"",r)),this._emitChange({name:e,value:void 0,options:t})},e.prototype.addChangeListener=function(e){this.changeListeners.push(e)},e.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},e}(),Z=r(30),ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.identity;return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,a="function"==typeof e?e(n):e,o=Object(z.getIdsFromQuery)(r);if(o.length<1)return Promise.resolve([]);var i={include:o.join(","),per_page:o.length};return V()({path:Object(Z.addQueryArgs)(a,i)}).then((function(e){return e.map(t)}))}}(C.NAMESPACE+"/data/get_shipments_providers",(function(e){return{key:e.id,label:e.provider_name}})),te=r(19),re=null,ne={name:"countries",className:"woocommerce-search__country-result",isDebounced:!0,options:function(){return re?Promise.resolve(re):V()({path:"/wc-analytics/data/get_shipments_providers"}).then((function(e){return re=e}))},getOptionIdentifier:function(e){return e.id},getSearchExpression:function(e){return"^"+e},getOptionKeywords:function(e){return[e.id,Object(te.decodeEntities)(e.provider_name)]},getOptionLabel:function(e,t){var r=Object(te.decodeEntities)(e.provider_name),n=function(e,t){if(!t)return null;var r=e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());return{suggestionBeforeMatch:Object(te.decodeEntities)(e.substring(0,r)),suggestionMatch:Object(te.decodeEntities)(e.substring(r,r+t.length)),suggestionAfterMatch:Object(te.decodeEntities)(e.substring(r+t.length))}}(r,t)||{};return Object(O.createElement)(O.Fragment,null,Object(O.createElement)("span",{key:"name",className:"woocommerce-search__result-name","aria-label":r},t?Object(O.createElement)(O.Fragment,null,n.suggestionBeforeMatch,Object(O.createElement)("strong",{className:"components-form-token-field__suggestion-match"},n.suggestionMatch),n.suggestionAfterMatch):r))},getOptionCompletion:function(e){return{key:e.id,label:Object(te.decodeEntities)(e.provider_name)}}},ae=Object(o.applyFilters)("woocommerce_admin_coupons_report_charts",[{key:"total_shipments",label:Object(i.__)("Total Shipments","woocommerce-admin"),order:"desc",orderby:"total_shipments",type:"number"},{key:"active_shipments",label:Object(i.__)("Active Shipments","woocommerce-admin"),order:"desc",orderby:"active_shipments",type:"number"},{key:"delivered_shipments",label:Object(i.__)("Delivered Shipments","woocommerce-admin"),order:"desc",orderby:"delivered_shipments",type:"number"},{key:"avg_shipment_length",label:Object(i.__)("Avg Shipment Length","woocommerce-admin"),order:"desc",orderby:"avg_shipment_length",type:"number"}]),oe=Object(o.applyFilters)("woocommerce_admin_coupon_report_advanced_filters",{filters:{},title:Object(i._x)("Coupons match {{select /}} filters","A sentence describing filters for Coupons. See screen shot for context: https://cloudup.com/cSsUY9VeCVJ","woocommerce-admin")}),ie=[{label:Object(i.__)("All Shipping Providers","woocommerce-admin"),value:"all"},{label:Object(i.__)("Single Provider","woocommerce-admin"),value:"select_provider",chartMode:"item-comparison",subFilters:[{component:"Search",value:"single_provider",chartMode:"item-comparison",path:["select_provider"],settings:{type:"custom",param:"providers",autocompleter:ne,getLabels:ee,labels:{placeholder:Object(i.__)("Type to search for a provider","woocommerce-admin"),button:Object(i.__)("Single Provider","woocommerce-admin")}}}]},{label:Object(i.__)("Comparison","woocommerce-admin"),value:"compare-provider",settings:{type:"custom",param:"providers",autocompleter:ne,getLabels:ee,labels:{title:Object(i.__)("Compare Providers","woocommerce-admin"),update:Object(i.__)("Compare","woocommerce-admin"),helpText:Object(i.__)("Check at least two providers below to compare","woocommerce-admin")}}}];Object.keys(oe.filters).length&&ie.push({label:Object(i.__)("Advanced filters","woocommerce-admin"),value:"advanced"});var se=Object(o.applyFilters)("woocommerce_admin_coupons_report_filters",[{label:Object(i.__)("Status","woocommerce-admin"),staticParams:[],param:"shipment_status",showFilters:function(){return!0},defaultValue:"all",filters:[{label:"All Shipment Statuses",value:"all"},{label:"In Transit",value:"in_transit"},{label:"Available For Pickup",value:"available_for_pickup"},{label:"Out For Delivery",value:"out_for_delivery"},{label:"Failed Attempt",value:"failure"},{label:"On Hold",value:"on_hold"},{label:"Exception",value:"exception"},{label:"Return To Sender",value:"return_to_sender"},{label:"Delivered",value:"delivered"}]},{label:Object(i.__)("Provider","woocommerce-admin"),staticParams:["chartType","paged","per_page"],param:"filter",showFilters:function(){return!0},value:"all",filters:ie}]);function ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object(k.find)(t,{key:e});return r||t[0]}function le(e){var t=e.className,r=Object(i.__)("There was an error getting your stats. Please try again.","woocommerce-admin"),n=Object(i.__)("Reload","woocommerce-admin");return Object(O.createElement)(w.EmptyContent,{className:t,title:r,actionLabel:n,actionCallback:function(){window.location.reload()}})}le.propTypes={className:x.a.string};var ue=le;var pe=function(e){h()(a,e);var t,r,n=(t=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=_()(t);if(r){var a=_()(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return b()(this,e)});function a(){return u()(this,a),n.apply(this,arguments)}return d()(a,[{key:"formatVal",value:function(e,t){var r=this.context,n=r.formatAmount,a=r.getCurrencyConfig;return"currency"===t?n(e):Object(G.formatValue)(a(),t,e)}},{key:"getValues",value:function(e,t){var r=this.props,n=r.emptySearchResults,a=r.summaryData.totals,o=a.primary?a.primary[e]:0,i=a.secondary?a.secondary[e]:0,s=n?0:o,c=n?0:i;return{delta:Object(G.calculateDelta)(s,c),prevValue:this.formatVal(c,t),value:this.formatVal(s,t)}}},{key:"render",value:function(){var e=this,t=this.props,r=t.charts,n=t.query,a=t.selectedChart,o=t.summaryData,s=t.endpoint,c=t.report,l=t.defaultDateRange,u=o.isError,p=o.isRequesting;if(u)return Object(O.createElement)(ue,null);if(p)return Object(O.createElement)(w.SummaryListPlaceholder,{numberOfItems:r.length});var d=Object(E.getDateParamsFromQuery)(n,l).compare;return Object(O.createElement)(w.SummaryList,null,(function(t){var n=t.onToggle;return r.map((function(t,r){var o=t.key,l=t.order,u=t.orderby,p=t.label,f=t.type,m=t.isReverseTrend,y=t.labelTooltipText,h={chart:o};u&&(h.orderby=u),l&&(h.order=l);var v=Object(z.getNewPath)(h),b=a.key===o,g=e.getValues(o,f),_=g.delta,j=g.prevValue,S=g.value;return Object(O.createElement)(w.SummaryNumber,{key:o,delta:_,href:3==r?"":v,label:p,reverseTrend:m,prevLabel:"previous_period"===d?Object(i.__)("Previous period:","woocommerce-admin"):Object(i.__)("Previous year:","woocommerce-admin"),prevValue:j,selected:b,value:S,labelTooltipText:y,onLinkClickCallback:function(){n&&n(),Object(R.recordEvent)("analytics_chart_tab_click",{report:c||s,key:o})}})}))}))}}]),a}(O.Component);pe.propTypes={charts:x.a.array.isRequired,endpoint:x.a.string.isRequired,limitProperties:x.a.array,query:x.a.object.isRequired,selectedChart:x.a.shape({key:x.a.string.isRequired,label:x.a.string.isRequired,order:x.a.oneOf(["asc","desc"]),orderby:x.a.string,type:x.a.oneOf(["average","number","currency"]).isRequired}).isRequired,summaryData:x.a.object,report:x.a.string},pe.defaultProps={summaryData:{totals:{primary:{},secondary:{}},isError:!1}},pe.contextType=L;var de=Object(j.compose)(Object(D.withSelect)((function(e,t){var r=t.charts,n=t.endpoint,a=t.limitProperties,o=t.query,i=t.filters,s=t.advancedFilters,c=a||[n],l=c.some((function(e){return o[e]&&o[e].length}));if(o.search&&!l)return{emptySearchResults:!0};var u=r&&r.map((function(e){return e.key})),p=e(C.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings").woocommerce_default_date_range;return{summaryData:Object(C.getSummaryNumbers)({endpoint:n,query:o,select:e,limitBy:c,filters:i,advancedFilters:s,defaultDateRange:p,fields:u}),defaultDateRange:p}})))(pe),fe=r(25);function me(e){return function(t){return Object(fe.format)(e,t)}}function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ve=function(e){h()(a,e);var t,r,n=(t=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=_()(t);if(r){var a=_()(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return b()(this,e)});function a(e){var t;return u()(this,a),(t=n.call(this,e)).state={chartData_DATA:[],loader:!1},t}return d()(a,[{key:"shouldComponentUpdate",value:function(e){return e.isRequesting!==this.props.isRequesting||e.primaryData.isRequesting!==this.props.primaryData.isRequesting||e.secondaryData.isRequesting!==this.props.secondaryData.isRequesting||!Object(k.isEqual)(e.query,this.props.query)}},{key:"getItemChartData",value:function(){var e=this.props,t=e.primaryData,r=e.selectedChart;return t.data.intervals.map((function(e){var t={};return e.subtotals.segments.forEach((function(e){if(e.segment_label){var n=t[e.segment_label]?e.segment_label+" (#"+e.segment_id+")":e.segment_label;t[e.segment_id]={label:n,value:e.subtotals[r.key]||0}}})),he({date:Object(fe.format)("Y-m-d\\TH:i:s",e.date_start)},t)}))}},{key:"getTimeChartData",value:function(){var e=this.props,t=e.query,r=e.primaryData,n=e.secondaryData,a=e.selectedChart,o=e.defaultDateRange,i=Object(E.getIntervalForQuery)(t,o),s=Object(E.getCurrentDates)(t,o),c=s.primary,l=s.secondary;return r.data.intervals.map((function(e,r){var o=Object(E.getPreviousDate)(e.date_start,c.after,l.after,t.compare,i),s=n.data.intervals[r];return{date:Object(fe.format)("Y-m-d\\TH:i:s",e.date_start),primary:{label:"".concat(c.label," (").concat(c.range,")"),labelDate:e.date_start,value:e.subtotals[a.key]||0},secondary:{label:"".concat(l.label," (").concat(l.range,")"),labelDate:o.format("YYYY-MM-DD HH:mm:ss"),value:s&&s.subtotals[a.key]||0}}}))}},{key:"getTimeChartTotals",value:function(){var e=this.props,t=e.primaryData,r=e.secondaryData,n=e.selectedChart;return{primary:Object(k.get)(t,["data","totals",n.key],null),secondary:Object(k.get)(r,["data","totals",n.key],null)}}},{key:"getQueryParameters",value:function(e){var t=encodeURIComponent(Object(E.appendTimestamp)(e.primaryDate.after,"start")),r=encodeURIComponent(Object(E.appendTimestamp)(e.primaryDate.before,"end"));return"?after=".concat(t,"&before=").concat(r,"&interval=day&order=asc&per_page=100&_locale=user")}},{key:"renderChart",value:function(e,t,r,n){var a=this.props,o=a.emptySearchResults,s=a.filterParam,c=a.interactiveLegend,l=a.itemsLabel,u=a.legendPosition,p=a.path,d=a.query,f=a.selectedChart,m=a.showHeaderControls,y=a.primaryData,h=a.defaultDateRange,v=Object(E.getIntervalForQuery)(d,h),b=Object(E.getAllowedIntervalsForQuery)(d,h),g=Object(E.getDateFormatsForInterval)(v,y.data.intervals.length,{type:"php"}),_=o?Object(i.__)("No data for the current search","woocommerce-admin"):Object(i.__)("No data for the selected date range","woocommerce-admin"),j=this.context,S=j.formatAmount,x=j.getCurrencyConfig;return Object(O.createElement)(w.Chart,{allowedIntervals:b,data:r,dateParser:"%Y-%m-%dT%H:%M:%S",emptyMessage:_,filterParam:s,interactiveLegend:c,interval:v,isRequesting:t,itemsLabel:l,legendPosition:u,legendTotals:n,mode:e,path:p,query:d,screenReaderFormat:me(g.screenReaderFormat),showHeaderControls:m,title:f.label,tooltipLabelFormat:me(g.tooltipLabelFormat),tooltipTitle:"time-comparison"===e&&f.label||null,tooltipValueFormat:Object(C.getTooltipValueFormat)(f.type,S),chartType:Object(E.getChartTypeForQuery)(d),valueType:f.type,xFormat:me(g.xFormat),x2Format:me(g.x2Format),currency:x()})}},{key:"renderItemComparison",value:function(){var e=this.props,t=e.isRequesting,r=e.primaryData;if(r.isError)return Object(O.createElement)(ue,null);var n=t||r.isRequesting,a=this.getItemChartData();return this.renderChart("item-comparison",n,a)}},{key:"renderTimeComparison",value:function(){var e=this.props,t=e.isRequesting,r=e.primaryData,n=e.secondaryData;if(!r||r.isError||n.isError)return Object(O.createElement)(ue,null);var a=t||r.isRequesting||n.isRequesting,o=this.getTimeChartData(),i=this.getTimeChartTotals();return this.renderChart("time-comparison",a,o,i)}},{key:"render",value:function(){return"item-comparison"===this.props.mode?this.renderItemComparison():this.renderTimeComparison()}}]),a}(O.Component);ve.contextType=L,ve.propTypes={filters:x.a.array,isRequesting:x.a.bool,itemsLabel:x.a.string,limitProperties:x.a.array,mode:x.a.string,path:x.a.string.isRequired,primaryData:x.a.object,query:x.a.object.isRequired,secondaryData:x.a.object,selectedChart:x.a.shape({key:x.a.string.isRequired,label:x.a.string.isRequired,order:x.a.oneOf(["asc","desc"]),orderby:x.a.string,type:x.a.oneOf(["average","number","currency"]).isRequired}).isRequired},ve.defaultProps={isRequesting:!1,primaryData:{data:{intervals:[]},isError:!1,isRequesting:!1},secondaryData:{data:{intervals:[]},isError:!1,isRequesting:!1}};var be=Object(j.compose)(Object(D.withSelect)((function(e,t){var r=t.charts,n=t.endpoint,a=t.filters,o=t.isRequesting,i=t.limitProperties,s=t.query,c=t.advancedFilters,l=i||[n],u=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||0===t.length)return null;var a=t.slice(0),o=a.pop();if(o.showFilters(r,n)){var i=Object(z.flattenFilters)(o.filters),s=r[o.param]||o.defaultValue||"all";return Object(k.find)(i,{value:s})}return e(a,r,n)}(a,s),p=Object(k.get)(u,["settings","param"]),d=t.mode||function(e,t){if(e&&t){var r=Object(k.get)(e,["settings","param"]);if(!r||Object.keys(t).includes(r))return Object(k.get)(e,["chartMode"])}return null}(u,s)||"time-comparison",f=e(C.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings").woocommerce_default_date_range,m=e(C.REPORTS_STORE_NAME),y={mode:d,filterParam:p,defaultDateRange:f};if(o)return y;var h=l.some((function(e){return s[e]&&s[e].length}));if(s.search&&!h)return he(he({},y),{},{emptySearchResults:!0});var v=r&&r.map((function(e){return e.key})),b=Object(C.getReportChartData)({endpoint:n,dataType:"primary",query:s,selector:m,limitBy:l,filters:a,advancedFilters:c,defaultDateRange:f,fields:v});if("item-comparison"===d)return he(he({},y),{},{primaryData:b});var g=Object(C.getReportChartData)({endpoint:n,dataType:"secondary",query:s,selector:m,limitBy:l,filters:a,advancedFilters:c,defaultDateRange:f,fields:v});return he(he({},y),{},{primaryData:b,secondaryData:g})})))(ve);function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var _e=function(e){h()(a,e);var t,r,n=(t=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=_()(t);if(r){var a=_()(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return b()(this,e)});function a(e){var t;u()(this,a),(t=n.call(this,e)).handleDateChange=t.handleDateChange.bind(m()(t)),t.onFilterSelect=t.onFilterSelect.bind(m()(t));var r=t.createDateQuery(t.props.query),o=new T.a(q.CURRENCY);return t.getQueryParameters(r),t.getQueryParametersbf(r),t.state={dateQuery:r,filterquery:"",filterquery2:"",currency:o,data:{},chartData:[],loading:!1,selectSummer:0,total_point:{},total_point_c:{},shipment_type:"",oneTimeLoad:!1,hidefooter:!1},t}return d()(a,[{key:"componentDidMount",value:function(){}},{key:"shouldComponentUpdate",value:function(e){return!Object(k.isEqual)(e.query,this.props.query)}},{key:"getValues",value:function(e,t){return{value:102}}},{key:"fetchData",value:function(e){}},{key:"createDateQuery",value:function(e){var t=Object(E.getDateParamsFromQuery)(e),r=t.period,n=t.compare,a=t.before,o=t.after,i=Object(E.getCurrentDates)(e);return{period:r,compare:n,before:a,after:o,primaryDate:i.primary,secondaryDate:i.secondary}}},{key:"getQueryParameters",value:function(e){var t=encodeURIComponent(Object(E.appendTimestamp)(e.primaryDate.after,"start")),r=encodeURIComponent(Object(E.appendTimestamp)(e.primaryDate.before,"end"));return"?after=".concat(t,"&before=").concat(r)}},{key:"getQueryParametersbf",value:function(e){var t=encodeURIComponent(Object(E.appendTimestamp)(e.secondaryDate.after,"start")),r=encodeURIComponent(Object(E.appendTimestamp)(e.secondaryDate.before,"end"));return"?after=".concat(t,"&before=").concat(r)}},{key:"prepareData",value:function(e,t,r,n,a){var o;return o=e.total_count&&e.active_count&&e.delivered_count&&e.avg_shipping_length?{totals:{total_shipments:e.total_count,active_shipments:e.active_count,delivered_shipments:e.delivered_count,avg_shipping_length:e.avg_shipping_length}}:{totals:{total_shipments:0,active_shipments:0,delivered_shipments:0,avg_shipping_length:0}},t.length>0?o.shipments_by_status=t:o.shipments_by_status=[],r.length>0?o.shipments_by_providers=r:o.shipments_by_providers=[],n.length>0?o.shipments_by_date=n:o.shipments_by_date=[],o.shipments_providers=a,o}},{key:"handleDateChange",value:function(e){var t=this.createDateQuery(e);this.setState({dateQuery:t})}},{key:"onFilterSelect",value:function(e){var t,r,n=Object.keys(e);"shipment_status"==n[0]?(t=void 0===e.shipment_status?"":e.shipment_status,localStorage.setItem("shipment_status",void 0===e.shipment_status?"":e.shipment_status),this.setState({filterquery:t})):(t=this.state.filterquery,localStorage.setItem("shipment_status",this.state.filterquery),this.setState({filterquery:this.state.filterquery})),"shipment_providers"==n[0]?(r=void 0===e.shipment_providers?"":e.shipment_providers,localStorage.setItem("shipment_providers",void 0===e.shipment_providers?"":e.shipment_providers),this.setState({filterquery2:r})):(r=this.state.filterquery2,localStorage.setItem("shipment_providers",this.state.filterquery2),this.setState({filterquery2:this.state.filterquery2}))}},{key:"getChartMeta",value:function(){var e=this.props.query,t="compare-provider"===e.filter&&e.providers&&e.providers.split(",").length>1?"item-comparison":"time-comparison";return{itemsLabel:Object(i.__)("%d providers","woocommerce-admin"),mode:t}}},{key:"render",value:function(){var e=this.state,t=e.data,r=e.currency,n=e.dateQuery,a=(new X,localStorage.getItem("shipment_status"),localStorage.getItem("shipment_providers"),this.getChartMeta()),o=a.mode,i=a.itemsLabel,s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.props.query);return"item-comparison"===o&&(s.segmentby="country"),Object(O.createElement)(O.Fragment,null,Object(O.createElement)(U,{query:this.props.query,path:this.props.path,filters:se,advancedFilters:oe,report:"provider"}),Object(O.createElement)(de,{charts:ae,endpoint:"data/trackship",isRequesting:!1,query:s,selectedChart:ce(this.props.query.chart,ae),filters:se,advancedFilters:oe}),Object(O.createElement)(be,{charts:ae,filters:se,advancedFilters:oe,mode:o,endpoint:"data/trackship",path:this.props.path,query:s,isRequesting:!1,itemsLabel:i,legendPosition:"",selectedChart:ce(this.props.query.chart,ae)}),Object(O.createElement)(K,{shipments_by_status:t.status_data,shipments_by_providers:t.providers_data,dateRange:n.primaryDate.range,dateQuery:n,currency:r}))}}]),a}(O.Component);Object(o.addFilter)("woocommerce_admin_reports_list","trackship-analytics",(function(e){return[].concat(a()(e),[{report:"trackship-analytics",title:Object(i.__)("TrackShip Analytics","trackship-for-woocommerce"),component:_e}])}))}]);